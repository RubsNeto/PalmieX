<!-- pedidos/templates/producao/producao.html -->

{% extends 'base.html' %}
{% load static %}

{% block title %}Produção{% endblock title %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/producao/producao.css' %}">
{% endblock extra_css %}

{% block content %}
<div class="container-pedidos">
  <h1>Produção</h1>

  {% if pedidos %}
  <table class="pedidos-table">
    <thead>
      <tr>
        <th>Cliente</th>
        <th>Código</th>
        <th>Data</th>
        <th>Hora</th>
        <th>Status</th>
        <th>Ação</th>
      </tr>
    </thead>
    <tbody>
      {% for pedido in pedidos %}
      <tr class="pedido-resumo" data-pedido-id="{{ pedido.id }}">
        <td class="cliente">{{ pedido.cliente }}</td>
        <td>{{ pedido.id }}</td>
        <td>{{ pedido.data|date:"d/m/Y" }}</td>
        <td>{{ pedido.data|date:"H:i" }}</td>
      
        <td class="status-pedido" style="color: {% if pedido.status == 'Pendente' %}#ffc107{% elif pedido.status == 'Em Produção' %}#17a2b8{% elif pedido.status == 'Finalizado' %}#333{% else %}#00b244{% endif %};">
          • <span style="text-decoration: underline;">{{ pedido.status }}</span>
        </td>
      
        <td class="botoes">
          <button type="button" class="ver-detalhes" data-pedido-id="{{ pedido.id }}" title="Detalhes">
            <img class="detalhes" src="{% static 'img/detalhes.svg' %}">
          </button>

           <!-- Botão Colocar em Produção -->
          <button type="button" class="alterar-status prod" data-pedido-id="{{ pedido.id }}" data-novo-status="Em Produção" title="Produção">
            <img class="producao" src="{% static 'img/producao.svg' %}">
          </button>

          <!-- Botão Finalizar Pedido -->
          <button type="button" class="alterar-status fim" data-pedido-id="{{ pedido.id }}" data-novo-status="Pedido Finalizado" title="Concluido">
            <img class="concluido" src="{% static 'img/concluido.svg' %}">
          </button>

            
          <button type="button" class="imprimir-pedido" data-pedido-id="{{ pedido.id }}" title="Imprimir">
              <img class="detalhes" src="{% static 'img/imprimir.svg' %}">
          </button>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
    <p>Nenhum pedido encontrado.</p>
  {% endif %}
</div>

<!-- Estrutura do Modal -->
<div id="detalhesModal" class="modal">
  <div class="modal-content">
    <span class="close-button">&times;</span>
    <div class="itens-do-pedido-modal">
      <!-- Os detalhes do pedido serão inseridos aqui via JavaScript -->
    </div>
    <!-- Novos Botões para Alterar Status -->
    <div class="botoes-status">
      <button type="button" class="alterar-status-modal" data-novo-status="Em Produção">Marcar como Em Produção</button>
      <button type="button" class="alterar-status-modal" data-novo-status="Pedido Finalizado">Marcar como Finalizado</button>
    </div>
  </div>
</div>
{% endblock content %}

{% block extra_js %}
<script src="{% static 'js/producao.js' %}"></script>
{% endblock extra_js %}
